<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cloud Cleaner</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; background: #222; color: #fff; }
        button { padding: 20px 40px; font-size: 20px; border-radius: 15px; border: none; background: #e53935; color: white; font-weight: bold; cursor: pointer; box-shadow: 0 5px 15px rgba(229, 57, 53, 0.4); }
        button:active { transform: scale(0.95); }
        #log { margin-top: 20px; color: #aaa; font-size: 14px; text-align: center;}
    </style>
</head>
<body>

    <button onclick="wipeCloud()">üß® –ü–û–õ–ù–´–ô –°–ë–†–û–°</button>
    <div id="log">–ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã –æ—á–∏—Å—Ç–∏—Ç—å –æ–±–ª–∞–∫–æ Telegram</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.ready();
    tg.expand();

    function log(txt) { document.getElementById('log').innerText = txt; }

    function wipeCloud() {
        if (!tg.CloudStorage) { log("–û—à–∏–±–∫–∞: –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ Telegram Cloud"); return; }
        
        log("–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–µ–π...");
        tg.CloudStorage.getKeys((err, keys) => {
            if (err) { log("–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è: " + err); return; }
            if (!keys || keys.length === 0) { log("–û–±–ª–∞–∫–æ —É–∂–µ –ø—É—Å—Ç–æ–µ!"); return; }

            // –§–∏–ª—å—Ç—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –Ω–∞—à–∏ –∫–ª—é—á–∏ (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
            const myKeys = keys.filter(k => k === 'metro_settings' || k.startsWith('s_'));
            
            if (myKeys.length === 0) { log("–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö MetroTime –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è."); return; }

            log("–£–¥–∞–ª–µ–Ω–∏–µ " + myKeys.length + " –∑–∞–ø–∏—Å–µ–π...");
            
            tg.CloudStorage.removeItems(myKeys, (err) => {
                if (err) { log("–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è: " + err); } 
                else { 
                    log("‚úÖ –ì–û–¢–û–í–û! –û–±–ª–∞–∫–æ –æ—á–∏—â–µ–Ω–æ.\n–¢–µ–ø–µ—Ä—å –æ—Ç–∫—Ä–æ–π –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –Ω–∞–∂–º–∏ '–û—Ç–ø—Ä–∞–≤–∏—Ç—å'."); 
                    document.querySelector('button').style.backgroundColor = '#43a047';
                    document.querySelector('button').innerText = '–£–°–ü–ï–®–ù–û';
                }
            });
        });
    }
</script>
</body>
</html>